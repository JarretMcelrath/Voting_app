<!DOCTYPE html>
<%- include('partials/header', { title: 'Home Page' }) %>
<link rel="stylesheet" href="/css/style.css">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Details</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">

</head>
<body>
    <% if (messages.success && messages.success.length > 0) { %>
        <div class="alert alert-success">
            <%= messages.success %>
        </div>
    <% } %>
    <div class="container mt-4">
        <h2>User Details</h2>
        <form action="/updateUser" method="POST">
            <div class="form-group">
                <label for="voter_id">Voter ID</label>
                <input type="text" name="voter_id" class="form-control" id="voter_id" required value="<%= userDetails.voter_id %>" disabled>
                <input type="hidden" name="voter_id" value="<%= userDetails.voter_id %>">
            </div>
            <!-- First Name -->
            <div class="form-group">
                <label for="first_name">First Name:</label>
                <input type="text" name="first_name" class="form-control" id="first_name" placeholder="Enter your first name" required value="<%= userDetails.first_name %>" disabled>
                <input type="hidden" name="first_name" value="<%= userDetails.first_name %>">
            </div>
            <!-- Middle Name -->
            <div class="form-group">
                <label for="middle_name">Middle Name:</label>
                <input type="text" name="middle_name" class="form-control" id="middle_name" placeholder="Enter your middle name" required value="<%= userDetails.middle_name %>" disabled>
                <input type="hidden" name="middle" value="<%= userDetails.middle_name %>">

            </div>
            <!-- Last Name -->
            <div class="form-group">
                <label for="last_name">Last Name:</label>
                <input type="text" name="last_name" class="form-control" id="last_name" placeholder="Enter your last name" required value="<%= userDetails.last_name %>" disabled>
                <input type="hidden" name="last_name" value="<%= userDetails.last_name %>">
            </div>
            <!-- Age -->
            <div class="form-group">
                <label for="age">Age:</label>
                <input type="number" name="age" class="form-control" id="age" placeholder="Enter your age" required value="<%= userDetails.age %>" disabled>
                <input type="hidden" name="age" value="<%= userDetails.age %>">

            </div>
            <!-- Address -->
            <div class="form-group">
                <label for="address">Street Address:</label>
                <input type="text" name="address" class="form-control" id="address" placeholder="Enter your street address" required value="<%= userDetails.address %>">
            </div>
            <!-- City -->
            <div class="form-group">
                <label for="city">City:</label>
                <input type="text" class="form-control" name="city" id="city" placeholder="Enter your city" required value="<%= userDetails.city %>">
            </div>
            <!-- State -->
            <div class="form-group">
                <label for="state">State:</label>
                <input type="text" class="form-control" name="state" id="state" placeholder="Enter your state" required value="<%= userDetails.state %>">
            </div>
            <!-- Zip Code -->
            <div class="form-group">
                <label for="zip">Zip Code:</label>
                <input type="text" class="form-control" name="zip" id="zip" placeholder="Enter your ZIP code" required value="<%= userDetails.zip %>">
            </div>
            <!-- Driving License -->
            <div class="form-group">
                <label for="license">Driving License:</label>
                <input type="text" class="form-control" name="driving" id="license" placeholder="Enter your driving license number" required value="<%= userDetails.driving_lic %>" disabled>
                <input type="hidden" name="driving" value="<%= userDetails.driving %>">
            </div>
            <!-- Passport -->
            <div class="form-group">
                <label for="passport">Passport:</label>
                <input type="text" class="form-control" name="passport" id="passport" placeholder="Enter your passport number" required value="<%= userDetails.passport %>" disabled>
                <input type="hidden" name="passport" value="<%= userDetails.passport %>">
            </div>
            <!-- Email ID -->
            <div class="form-group">
                <label for="email">Email ID:</label>
                <input type="email" class="form-control" name="email" id="email" placeholder="Enter your email address" required value="<%= userDetails.email %>" disabled>
                <input type="hidden" name="email" value="<%= userDetails.email %>">

            </div>
            <!-- Password -->
            <div class="form-group">
                <label for="password">New Password:</label>
                <input type="password" class="form-control" name="password" id="password" placeholder="Enter new password">
            </div>
            
            <div class="row">
                <div class="col text-right">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </div>
        </form> 
    </div>

    <!-- Include jQuery and Bootstrap scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <script>
        $(document).ready(function() {
            $('#edit-info').click(function() {
                const editableFields = ['#address', '#city', '#state', '#zip', '#password'];
                
                editableFields.forEach(selector => {
                    $(selector).prop('disabled', false);
                });
            });
        });
    </script>
    
</body>
</html>

